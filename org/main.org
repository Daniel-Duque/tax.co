* TODO next
** some questions that seem to overlap
*** sale of title
 P7510S9 = "rendimientos por venta de titulos"
 P7513S4 = "Ventas de acciones y de títulos valores"
*** loans
 P7513S5 = "Reembolsoso de dinero prestado por usted o a otra persona"
 P7513S7A1 = " Préstamos particulares"
** unsorted
*** "P6500 (asalariado income) > 0" should be perfecty corr'd with pension contrib's
*** ??? pension contribs = formality.
** TODO next: add region, estrato (see below)
** frequency
*** remap urban cap c to match the others
*** once it's interpretable, add it to the capitulo c legend code
** value = expense; price = value / quantity
*** David used real data, e.g. rice price, to figure this out. Genius.
** where-bought: search for "no vat" in enph.org
** how-got: see enph.org
** kinds of income
*** labor
*** investment, business income
*** transfer : from gov't or charity or family or alimony
* to explain in paper : institution details | judgment calls
** we include infrequent income in monthly income
sales, loan repayment, jury awards, gambling winnings, inheritance ...
** We on't count borrowing as income, because you don't pay for your income with later income.
** P7500S3A1 : alimony. ignoring, to avoid double-counting.
** terms in the ENPH
*** Unemployed
During the past four weeks, actively searching for a job and available last week to start in case of success; or employed at least 2 weeks over the last 12 months, has actively searched after last job and was available last week to start in case of success; or not employed at least 2 weeks over the last 12 months, has actively searched after last job and was available last week to start in case of success.
*** Inactive 
Permanent disability; or During the past four weeks, actively searching for a job and not available last week to start in case of success; or not willing to work; or full-time students; or employed at least 2 weeks over the last 12 months but has not actively searched after last job; or full time domestic work; or has not searched for a job during the past 12 months; or has searched a job over the last 12 months but was not available to start last week in case of success.
** they are asked on the 15th about consumption on days 1-14
** where-got: if missing, assume taxed
# Even when purhcase=1, in some files there are a substantial number
# of observations where where-got is missing. A way to see that:
util.dwmByGroup( "file-origin",
                 data.purchases[ data.purchases["is-purchase"]==1 ]
                 [["file-origin","where-got"]] )
** freq: if missing, discarded
*** when is-purchase=1, freq is undefined only .015 % of the time
*** so omitting purchase!=1 observations won't bias our estimate of VAT
*** it will, however, bias (downward) our estimate of consumption
** we don't include property purchases
*** there is no VAT on land purchases
*** there is 5% VAT for purchases of *new* homes in excess of 880 M pesos
**** but the data only reports newness in the case of second homes
**** that's a very small fraction of the economy
** more than 2/3 of the "capitulo c" observations have no associated value
*** and they are only divided into 25 broad categories, with no associated quantity variable, so imputation is infeasible
*** Those value-missing observations are 19.2% of our data.
* would be nice
** to have a default value for freq
*** when is-purchase=1, freq is undefined only .015 % of the time
*** so omitting purchase!=1 observations won't bias our estimate of VAT
*** it will, however, bias (downward) our estimate of consumption
* about the data|results
** The ENPH : http://microdatos.dane.gov.co/index.php/catalog/566/get_microdata
** the 200 / 1400 missing COICOP codes appear not to matter much
*** the 80% of purchases that carry 0 VAT are due to a literally 0 VAT, not a NaN VAT
*** in the 10% sample less than 0.3% of the purchases have a NaN vat rate
x = purchases["vat-rate"]
>>> len(x)
7458243
>>> len( x[ x.isnull() ] )
28986
>>> 28986 / 7458243
0.0038864381329490067
* restaurant|cafeteria tax / todo
** if bought in cafeteria or restaurant, gets the 8% tax and no VAT, but otherwise they would pay VAT
* income tax / todo
** ENPH asks about income tax
** if no SS payments and (or?) making less than min wage, informal
** primary inputs: income, kids, voluntary pension fund contributions.
** at most 40% of a person's inncome can be exempt.
* VAT / todo
** code-internal
*** pdflatex: send reports to a file, not stdout
**** this way it doesn't drown the python error reports
** check data
*** are these two variables ever both > 0 ?
**** P5180S1, P5180S2 : daily payment for, value of food at school
**** P6180S1, P6180S2 : daily payment for, value of food at university

*** TODO what are the biggest expenditures in the zero-vat set? good to check those vat rates.
*** is it half of households or half of individuals who have no income?
*** is it missing sole proprietor income?
**** is the income data equally missing in the GEIH?
** add features
*** household VAT rates by income decile
*** regional VAT rates
>>> df[ "joined" ] = df[ "DOMINIO" ] + " + " + df["REGION"]
>>> for c in sorted( df[ "joined" ].unique() ): print(c)

centro poblado = smallest unit
otras cabeceras = bigger, aggregate of municipalities
bigger yet are cities, which are identified by name
rural disperso = by area biggest, but low population (and low density)

Luis wanted at least for ...
  - Bogota
  - Medellín
  - Cali
  - Barranquilla+Soledad (one metro area)
  - Bucaramanga
  - Cartagena
  - Cúcuta
  - Ibagué
  - Pasto
  - Popayán
*** ? include people/spending (already drawn)
*** make x-ticks more readable on some figures (e.g. fig 7, people/income)
*** TODO every spendinng graph, draw for people even with zero income
*** TODO CDF / spending: draw that for every income decile
*** TODO do things by estrato; assume someone's electrical estrato is their estrato
***** P8520S1A1
*** if we had VAT as a function of estrato, then we could
**** apply those rates to income data from a survey with more incomme data
