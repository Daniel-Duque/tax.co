* TODO next
** add frequencia to the capitulo c legend code
** value = expense; price = value / quantity
*** David used real data, e.g. rice price, to figure this out. Genius.
** frequency: remap urban cap c to match the others
** where-bought: search for "no vat" in enph.org
** how-got: see enph.org
** frequency: interpret it
** kinds of income
*** labor
*** investment, business income
*** transfer : from gov't or charity or family or alimony
** no VAT on land purchases
* judgment calls to explain in paper
** where-got: if missing, assume taxed
# Even when purhcase=1, in some files there are a substantial number
# of observations where where-got is missing. A way to see:
util.dwmByGroup( "file-origin",
                 data.purchases[ data.purchases["is-purchase"]==1 ]
                 [["file-origin","where-got"]] )
** freq: if missing, discarded
*** when is-purchase=1, freq is undefined only .015 % of the time
*** so omitting purchase!=1 observations won't bias our estimate of VAT
*** it will, however, bias (downward) our estimate of consumption
* would be nice
** to have a default value for freq
*** when is-purchase=1, freq is undefined only .015 % of the time
*** so omitting purchase!=1 observations won't bias our estimate of VAT
*** it will, however, bias (downward) our estimate of consumption
* about the data|results
** The ENPH : http://microdatos.dane.gov.co/index.php/catalog/566/get_microdata
** the 200 / 1400 missing COICOP codes appear not to matter much
*** the 80% of purchases that carry 0 VAT are due to a literally 0 VAT, not a NaN VAT
*** in the 10% sample less than 0.3% of the purchases have a NaN vat rate
x = purchases["vat-rate"]
>>> len(x)
7458243
>>> len( x[ x.isnull() ] )
28986
>>> 28986 / 7458243
0.0038864381329490067
* restaurant|cafeteria tax / todo
** if bought in cafeteria or restaurant, gets the 8% tax and no VAT, but otherwise they would pay VAT
* income tax / todo
** ENPH asks about income tax
** if no SS payments and (or?) making less than min wage, informal
** primary inputs: income, kids, voluntary pension fund contributions.
** at most 40% of a person's inncome can be exempt.
* VAT / todo
** using the new ENPH
*** household-communal: ignorable
** code-internal
*** pdflatex: send reports to a file, not stdout
**** this way it doesn't drown the python error reports
** check data
*** TODO what are the biggest expenditures in the zero-vat set? good to check those vat rates.
*** is it half of households or half of individuals who have no income?
*** is it missing sole proprietor income?
**** is the income data equally missing in the GEIH?
** add features
*** household VAT rates by income decile
*** regional VAT rates

>>> df[ "joined" ] = df[ "DOMINIO" ] + " + " + df["REGION"]
>>> for c in sorted( df[ "joined" ].unique() ): print(c)

centro poblado = smallest unit
otras cabeceras = bigger, aggregate of municipalities
bigger yet are cities, which are identified by name
rural disperso = by area biggest, but low population (and low density)

Luis wanted at least for ...
  - Bogota
  - Medellín
  - Cali
  - Barranquilla+Soledad (one metro area)
  - Bucaramanga
  - Cartagena
  - Cúcuta
  - Ibagué
  - Pasto
  - Popayán

*** ? include people/spending (already drawn)
*** make x-ticks more readable on some figures (e.g. fig 7, people/income)
*** TODO every spendinng graph, draw for people even with zero income
*** TODO CDF / spending: draw that for every income decile
*** TODO do things by estrato; assume someone's electrical estrato is their estrato
***** P8520S1A1
*** if we had VAT as a function of estrato, then we could
**** apply those rates to income data from a survey with more incomme data
